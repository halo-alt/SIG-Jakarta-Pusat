<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Home | Monitoring Suhu dan Kelembaban Kota Jakarta Pusat</title>
  </head>
  <body>
    <div class="container">
      <aside id="sidebar">
        <div class="sidebar-head">
          <div class="sidebar-title">
            <button id="toggle-btn">‚ò∞</button>
            <h2>My WebGIS</h2>
          </div>
          <div class="sidebar-subtitle">
            <p>Sistem Monitoring Suhu dan Kelembaban di Kota Jakarta Pusat</p>
          </div>
        </div>
        <ul>
          <li>
            <a href="index.html">üè†<span class="nav-labels">Home</span></a>
          </li>
          <li>
            <a href="maps.html">üó∫Ô∏è<span class="nav-labels">Maps</span></a>
          </li>
          <li>
            <a href="about.html">üë§<span class="nav-labels">About</span></a>
          </li>
        </ul>
      </aside>

      <main>
        <section class="hero">
          <div class="overlay"></div>
          <div class="hero-content">
            <h1>Monitoring Suhu dan Kelembaban</h1>
            <p class="subtitle">
              Solusi berbasis teknologi untuk Kota Jakarta Pusat menggunakan QGIS.
            </p>
            <a href="maps.html" class="cta-button">Lihat Peta</a>
          </div>
        </section>

        <section class="sensors">
          <h2>Sensor yang Digunakan</h2>
          <div class="sensor-list">
            <div class="sensor-item">
              <img
                src="https://tokoteknologi.co.id/resources/image/18/c1/f.jpg"
                alt="DHT22"
                class="sensor-icon"
              />
              <h3>DHT22</h3>
              <p>Sensor untuk memantau suhu dan kelembaban secara akurat.</p>
            </div>
            <div class="sensor-item">
              <img
                src="https://tokoteknologi.co.id/resources/image/18/bf/6.jpg"
                alt="GPS NEO 6M"
                class="sensor-icon"
              />
              <h3>GPS NEO 6M</h3>
              <p>Sensor GPS untuk menentukan lokasi dengan presisi tinggi.</p>
            </div>
            <div class="sensor-item">
              <img
                src="https://raharja.ac.id/wp-content/uploads/2021/11/ESP32-Module.png"
                alt="ESP32"
                class="sensor-icon"
              />
              <h3>ESP32</h3>
              <p>Microcontroller untuk pengelolaan data dan komunikasi IoT.</p>
            </div>
          </div>
        </section>

        <!-- Section Titik Pemantauan -->
        <section class="monitoring-points">
          <h2>Titik Pemantauan</h2>
          <div class="monitoring-cards">
            <!-- TITIK 1 -->
            <div class="card">
              <img src="images/image1.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 1: <span id="residental1">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat1">-</span></p>
                  <p>Longitude: <span id="long1">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps1">üó∫Ô∏è</a>
              </div>
            </div>

            <!-- TITIK 2 -->
            <div class="card">
              <img src="images/image2.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 2: <span id="residental2">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat2">-</span></p>
                  <p>Longitude: <span id="long2">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps2">üó∫Ô∏è</a>
              </div>
            </div>

            <!-- TITIK 3 -->
            <div class="card">
              <img src="images/image3.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 3: <span id="residental3">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat3">-</span></p>
                  <p>Longitude: <span id="long3">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps3">üó∫Ô∏è</a>
              </div>
            </div>

            <!-- TITIK 4 -->
            <div class="card">
              <img src="images/image1.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 4: <span id="residental4">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat4">-</span></p>
                  <p>Longitude: <span id="long4">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps4">üó∫Ô∏è</a>
              </div>
            </div>

            <!-- TITIK 5 -->
            <div class="card">
              <img src="images/image2.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 5: <span id="residental5">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat5">-</span></p>
                  <p>Longitude: <span id="long5">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps5">üó∫Ô∏è</a>
              </div>
            </div>

            <!-- TITIK 6 -->
            <div class="card">
              <img src="images/image3.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 6: <span id="residental6">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat6">-</span></p>
                  <p>Longitude: <span id="long6">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps6">üó∫Ô∏è</a>
              </div>
            </div>

            <!-- TITIK 7 -->
            <div class="card">
              <img src="images/image1.png" alt="ESP32" class="stasiun-thumbnail" />
              <h3>Titik 7: <span id="residental7">-</span></h3>
              <div class="point-contents">
                <div class="point-coordinate">
                  <p>Latitude: <span id="lat7">-</span></p>
                  <p>Longitude: <span id="long7">-</span></p>
                </div>
                <a class="gotomaps" target="_blank" href="#" id="go-to-maps7">üó∫Ô∏è</a>
              </div>
            </div>
          </div>
        </section>

        <!-- Section Lokasi dan Google Maps -->
        <section class="location">
          <h2>Lokasi Kantor Pusat</h2>
          <div class="location-content">
            <div class="map-container">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3963.381716630867!2d106.80979187393912!3d-6.599393064509932!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69c5d97d3764c3%3A0xd56ba6305181755c!2sUniversitas%20Pakuan!5e0!3m2!1sid!2sid!4v1734570592136!5m2!1sid!2sid"
                width="100%"
                height="450"
                style="border: 0"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              ></iframe>
            </div>

            <div class="contact-info">
              <div>
                <h3>Universitas Pakuan</h3>
                <p>
                  <strong>Alamat:</strong>Jl. Pakuan, RT.02/RW.06, Tegallega,
                  Kecamatan Bogor Tengah, Kota Bogor, Jawa Barat 16129
                </p>
                <p><strong>Email:</strong>rektorat@unpak.ac.id</p>
                <p><strong>Telepon:</strong> +62-811-1234-5678</p>
              </div>

              <div>
                <a
                  class="hub-button"
                  target="_blank"
                  href="mailto:rektorat@unpak.ac.id?subject=Tanya%20Stasium%20Pemantauan&body=Halo%20saya%20<Nama%20Anda>,%20ingin%20mengetahui%20lebih%20lanjut%20tentang%20<deskripsikan%20pertanyaan%20anda>"
                  >Hubungi via Email</a
                >
                <br />
                <a
                  class="hub-button"
                  target="_blank"
                  href="https://wa.me/628551111980?text=Halo%20saya%20<Nama%20Anda>,%20ingin%20mengetahui%20lebih%20lanjut%20tentang%20<deskripsikan%20pertanyaan%20anda>"
                  >Hubungi via Whatsapp</a
                >
              </div>
            </div>
          </div>
        </section>

        <footer>
          <p>&copy; 2026 Monitoring Suhu dan Kelembaban | Jakarta Pusat</p>
          <p>Dibuat dengan dedikasi untuk lingkungan</p>
        </footer>
      </main>
    </div>

    <script>
      // fallback aman: city_district kadang kosong
      function getDistrict(address) {
        return (
          address?.city_district ||
          address?.suburb ||
          address?.city ||
          address?.town ||
          address?.village ||
          address?.county ||
          "-"
        );
      }

      function updatePoint(index, dataLoc) {
        const nameEl = document.getElementById("residental" + index);
        const latEl = document.getElementById("lat" + index);
        const lonEl = document.getElementById("long" + index);
        const mapsEl = document.getElementById("go-to-maps" + index);

        // kalau elemen HTML belum ada, jangan crash
        if (!nameEl || !latEl || !lonEl || !mapsEl) return;

        nameEl.innerText = getDistrict(dataLoc.address);
        latEl.innerText = dataLoc.lat ?? "-";
        lonEl.innerText = dataLoc.lon ?? "-";
        mapsEl.href = `https://www.google.com/maps?q=${dataLoc.lat},${dataLoc.lon}`;
      }

      function fetchPoint(apiUrl, index) {
        fetch(apiUrl)
          .then((r) => r.json())
          .then((data) =>
            fetch(
              `https://nominatim.openstreetmap.org/reverse?lat=${data.field1}&lon=${data.field2}&format=json`
            )
          )
          .then((r) => r.json())
          .then((dataLoc) => updatePoint(index, dataLoc))
          .catch((error) => console.error("Error titik " + index + ":", error));
      }

      function fetchData() {
        const urls = [
          "https://api.thingspeak.com/channels/3222293/feeds/last.json?timezone=Asia%2FJakarta&api_key=XZZPNV5V4AO6TAX6",
          "https://api.thingspeak.com/channels/3222295/feeds/last.json?timezone=Asia%2FJakarta&api_key=G1NMDAZOUXIFAM8H",
          "https://api.thingspeak.com/channels/3222296/feeds/last.json?timezone=Asia%2FJakarta&api_key=MMRW11T56YPJTG3T",
          "https://api.thingspeak.com/channels/3222298/feeds/last.json?timezone=Asia%2FJakarta&api_key=YB5H7IMXKYLM07CU",
          "https://api.thingspeak.com/channels/3222300/feeds/last.json?timezone=Asia%2FJakarta&api_key=PPAAH2C5LNFZD5OY",
          "https://api.thingspeak.com/channels/3222302/feeds/last.json?timezone=Asia%2FJakarta&api_key=26EZWXN74YD88YD7",
          "https://api.thingspeak.com/channels/3222306/feeds/last.json?timezone=Asia%2FJakarta&api_key=JHU3NRBRV03QFNK4",
        ];

        urls.forEach((url, i) => fetchPoint(url, i + 1));
      }

      document.addEventListener("DOMContentLoaded", () => {
        fetchData();

        const sidebar = document.getElementById("sidebar");
        const toggleBtn = document.getElementById("toggle-btn");

        // kalau kamu mau default collapsed, aktifkan 2 baris ini:
        // sidebar.classList.toggle("collapsed");
        // document.querySelector("main").classList.toggle("collapsed");

        toggleBtn.addEventListener("click", () => {
          sidebar.classList.toggle("collapsed");
          document.querySelector("main").classList.toggle("collapsed");
        });
      });
    </script>
  </body>
</html>
